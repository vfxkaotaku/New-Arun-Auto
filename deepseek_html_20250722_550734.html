<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New Arun Auto - Premium Diesel Generators</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .generator-card {
            @apply bg-white rounded-xl shadow-lg overflow-hidden transform hover:scale-[1.02] transition-transform duration-300 relative;
        }
        .generator-image-container {
            @apply w-full h-48 sm:h-56 bg-gray-100 flex items-center justify-center overflow-hidden;
        }
        .generator-image {
            @apply w-full h-full object-contain p-4;
        }
        .btn-primary {
            @apply bg-[#f97316] text-white py-2 px-4 rounded-md hover:bg-[#ea580c] transition duration-300 ease-in-out font-semibold shadow-md hover:shadow-lg;
        }
        .btn-danger {
            @apply bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700 transition duration-300 ease-in-out font-semibold shadow-md hover:shadow-lg;
        }
        .whatsapp-button {
            @apply bg-green-500 text-white py-2 px-4 rounded-md hover:bg-green-600 transition duration-300 ease-in-out font-semibold flex items-center justify-center shadow-md hover:shadow-lg;
        }
        .nav-link {
            @apply text-gray-700 hover:text-[#f97316] hover:bg-[#f97316]/10 transition duration-300 font-medium py-2 px-3 rounded-md;
        }
        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in-down {
            animation: fadeInDown 0.8s ease-out forwards;
        }
        .hero-banner {
            position: relative;
            height: auto;
            min-height: 70vh;
            max-height: 800px;
            overflow: hidden;
        }
        .hero-slider {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        .hero-slide {
            position: absolute;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }
        .hero-slide.active {
            opacity: 1;
        }
        .hero-content {
            position: relative;
            z-index: 2;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            background: rgba(0, 0, 0, 0.5);
            padding: 2rem 0;
        }
        .brand-logo {
            filter: drop-shadow(0 0 8px rgba(255, 255, 255, 0.8));
            transition: all 0.3s ease;
        }
        .brand-logo:hover {
            transform: scale(1.05);
            filter: drop-shadow(0 0 12px rgba(255, 255, 255, 1));
        }
        .hidden-login {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: #f97316;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
            opacity: 0.3;
            transition: all 0.3s ease;
        }
        .hidden-login:hover {
            opacity: 1;
            transform: scale(1.1);
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }
        .animate-shake {
            animation: shake 0.5s ease;
        }
        .highlight-box {
            @apply border-2 border-[#f97316] rounded-2xl p-6 relative;
            background-color: rgba(249, 115, 22, 0.1);
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .highlight-box::before {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border: 2px solid transparent;
            border-radius: 16px;
            background: linear-gradient(45deg, #f97316, #f59e0b) border-box;
            -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: destination-out;
            mask-composite: exclude;
            pointer-events: none;
        }
        .highlight-button {
            @apply border-2 border-[#f97316] rounded-lg px-4 py-2 font-semibold;
            background-color: rgba(249, 115, 22, 0.1);
            transition: all 0.3s ease;
        }
        .highlight-button:hover {
            @apply bg-[#f97316] text-white;
        }
        .slider-dots {
            position: absolute;
            bottom: 30px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            z-index: 10;
        }
        .slider-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            margin: 0 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .slider-dot.active {
            background: #f97316;
            transform: scale(1.2);
        }
        
        /* Side Menu Styles */
        .side-menu {
            position: fixed;
            top: 0;
            left: -300px;
            width: 280px;
            height: 100vh;
            background-color: white;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transition: left 0.3s ease;
            padding-top: 20px;
        }
        .side-menu.active {
            left: 0;
        }
        .side-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        .side-menu-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        .side-menu-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid #eee;
            margin-bottom: 20px;
        }
        .side-menu-nav {
            padding: 0 20px;
        }
        .side-menu-link {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            color: #333;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        .side-menu-link:hover {
            background-color: rgba(249, 115, 22, 0.1);
            color: #f97316;
        }
        .side-menu-link i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        /* Mobile navbar styles */
        @media (max-width: 768px) {
            .navbar-container {
                flex-direction: column;
            }
            .mobile-top-bar {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
            }
            .logo-container {
                order: 2;
                text-align: center;
                width: 100%;
                margin-top: 1rem;
            }
            .search-container {
                order: 3;
                width: 100%;
                margin-top: 1rem;
            }
            .nav-links {
                display: none;
            }
            .hero-banner {
                min-height: 60vh;
            }
            .hero-content h1 {
                font-size: 2.2rem;
            }
            .hero-content h2 {
                font-size: 1.3rem;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Side Menu -->
    <div class="side-menu" id="side-menu">
        <div class="side-menu-header">
            <h3 class="text-xl font-bold text-[#f97316]">NEW ARUN AUTO</h3>
        </div>
        <nav class="side-menu-nav">
            <button class="side-menu-link w-full text-left nav-home-side">
                <i class="fas fa-home"></i> Home
            </button>
            <button class="side-menu-link w-full text-left nav-generators-side">
                <i class="fas fa-bolt"></i> Generators
            </button>
            <button class="side-menu-link w-full text-left nav-admin-side hidden">
                <i class="fas fa-cog"></i> Admin
            </button>
        </nav>
    </div>
    <div class="side-menu-overlay" id="side-menu-overlay"></div>

    <!-- Hidden Login Button -->
    <div class="hidden-login" id="hidden-login-btn">
        <i class="fas fa-lock"></i>
    </div>

    <!-- Navbar -->
    <nav class="bg-white shadow-lg py-4 px-6 sticky top-0 z-50">
        <div class="container mx-auto navbar-container">
            <!-- Mobile Top Bar -->
            <div class="mobile-top-bar md:hidden">
                <!-- Mobile Menu Button -->
                <button class="text-gray-700 hover:text-[#f97316]" id="mobile-menu-btn">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <!-- Title (visible on mobile) -->
                <a href="#" class="text-2xl font-bold text-[#f97316] rounded-md p-2 md:hidden">NEW ARUN AUTO</a>
                <!-- Empty div for spacing -->
                <div class="w-8"></div>
            </div>
            
            <!-- Logo (hidden on mobile, shown on desktop) -->
            <div class="logo-container hidden md:block">
                <a href="#" class="text-2xl font-bold text-[#f97316] rounded-md p-2">NEW ARUN AUTO</a>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <div class="relative flex items-center w-full">
                    <input type="text" id="search-input" placeholder="Search generators..." class="w-full px-4 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-[#f97316] focus:border-[#f97316]">
                    <button id="clear-search" class="absolute right-10 top-0 h-full px-3 text-gray-500 hover:text-[#f97316] hidden">
                        <i class="fas fa-times"></i>
                    </button>
                    <button id="search-button" class="absolute right-0 top-0 h-full px-3 text-gray-500 hover:text-[#f97316]">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            
            <!-- Desktop Navigation -->
            <div class="hidden md:flex space-x-4 nav-links mt-4 md:mt-0 md:ml-auto">
                <button class="nav-link nav-home">
                    <i class="fas fa-home mr-2"></i> Home
                </button>
                <button class="nav-link nav-generators">
                    <i class="fas fa-bolt mr-2"></i> Generators
                </button>
                <button class="nav-link nav-admin hidden">
                    <i class="fas fa-cog mr-2"></i> Admin
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Banner with Slider -->
    <div class="hero-banner">
        <div class="hero-slider" id="hero-slider">
            <!-- Slides will be added dynamically -->
        </div>
        <div class="hero-content text-white text-center">
            <div class="container mx-auto px-6">
                <h1 class="text-3xl md:text-5xl font-bold mb-4 animate-fade-in-down">NEW ARUN AUTO</h1>
                <h2 class="text-xl md:text-2xl font-medium mb-8 tracking-wider">AUTHORIZED DIESEL GENERATOR DEALERS</h2>
                
                <div class="flex flex-wrap justify-center gap-4 md:gap-6 my-8">
                    <div class="bg-white/20 p-3 md:p-4 rounded-lg backdrop-blur-sm">
                        <h3 class="text-lg md:text-xl font-semibold">KIRLOSKAR</h3>
                    </div>
                    <div class="bg-white/20 p-3 md:p-4 rounded-lg backdrop-blur-sm">
                        <h3 class="text-lg md:text-xl font-semibold">MAHINDRA</h3>
                    </div>
                    <div class="bg-white/20 p-3 md:p-4 rounded-lg backdrop-blur-sm">
                        <h3 class="text-lg md:text-xl font-semibold">KOEL</h3>
                    </div>
                </div>
                
                <p class="text-base md:text-lg mb-8 max-w-3xl mx-auto opacity-90 leading-relaxed">
                    58 Years of Excellence in Diesel Generators, Air Compressors, Alternator Rewinding & Civil Construction.
                </p>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6 max-w-4xl mx-auto mt-8">
                    <div class="bg-white/20 p-3 md:p-4 rounded-lg backdrop-blur-sm">
                        <p class="text-xl md:text-2xl font-bold">1000+</p>
                        <p class="text-xs md:text-sm">GENERATORS SOLD</p>
                    </div>
                    <div class="bg-white/20 p-3 md:p-4 rounded-lg backdrop-blur-sm">
                        <p class="text-xl md:text-2xl font-bold">58+</p>
                        <p class="text-xs md:text-sm">YEARS EXPERIENCE</p>
                    </div>
                    <div class="bg-white/20 p-3 md:p-4 rounded-lg backdrop-blur-sm">
                        <p class="text-xl md:text-2xl font-bold">4+</p>
                        <p class="text-xs md:text-sm">GENERATOR MODELS</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-dots" id="slider-dots">
            <!-- Dots will be added dynamically -->
        </div>
    </div>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Home Section -->
        <section id="home-section" class="content-section active py-12">
            <div class="text-center mb-12">
                <div class="highlight-box inline-block mx-auto mb-4">
                    <h2 class="text-3xl font-bold mb-2 text-[#f97316]">Our Premium Diesel Generators</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">Reliable power solutions for homes and businesses with 58 years of trusted service.</p>
                </div>
            </div>
            <button class="explore-generators-btn highlight-button block mx-auto py-3 px-8 text-[#f97316] hover:text-white">
                Explore Our Generator Range
            </button>
        </section>

        <!-- Generators Section -->
        <section id="generators-section" class="content-section py-12">
            <div class="highlight-box inline-block mb-12 mx-auto">
                <h2 class="text-3xl font-bold text-center text-[#f97316]">Our Generator Range</h2>
            </div>
            <div id="search-results-info" class="text-center text-gray-600 mb-4 hidden">
                Found <span id="results-count">0</span> matching generators
            </div>
            <div id="generators-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">
                <!-- Generator cards will appear here -->
            </div>
        </section>

        <!-- Admin Section -->
        <section id="admin-section" class="content-section py-12">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-3xl font-bold">Admin Panel</h2>
                <button id="logout-admin" class="btn-danger">
                    <i class="fas fa-sign-out-alt mr-2"></i> Logout
                </button>
            </div>
            
            <!-- Slider Management -->
            <div class="bg-white p-6 rounded-lg shadow-lg mb-8">
                <h3 class="text-xl font-semibold mb-4">Manage Hero Slider Images</h3>
                <div class="mb-4">
                    <label class="block mb-2">Add New Slide Image URL</label>
                    <div class="flex">
                        <input type="text" id="new-slide-url" class="flex-1 p-2 border rounded-l focus:ring-[#f97316] focus:border-[#f97316]" placeholder="Enter image URL">
                        <button id="add-slide-btn" class="btn-primary rounded-l-none">Add Slide</button>
                    </div>
                </div>
                <div id="slides-list" class="space-y-4">
                    <!-- Slides will appear here -->
                </div>
            </div>
            
            <!-- Add/Edit Generator Form -->
            <div class="bg-white p-6 rounded-lg shadow-lg mb-8">
                <h3 class="text-xl font-semibold mb-4" id="form-title">Add New Generator</h3>
                <form id="generator-form">
                    <input type="hidden" id="edit-id">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block mb-2">Brand</label>
                            <select id="brand" class="w-full p-2 border rounded focus:ring-[#f97316] focus:border-[#f97316]" required>
                                <option value="">Select brand</option>
                                <option value="Mahindra">Mahindra</option>
                                <option value="Kirloskar">Kirloskar</option>
                                <option value="KOEL">KOEL</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="block mb-2">Model</label>
                            <input type="text" id="model" class="w-full p-2 border rounded focus:ring-[#f97316] focus:border-[#f97316]" required>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block mb-2">kVA Rating</label>
                            <input type="number" id="kva" class="w-full p-2 border rounded focus:ring-[#f97316] focus:border-[#f97316]" required>
                        </div>
                        <div>
                            <label class="block mb-2">Image URL</label>
                            <input type="text" id="image" class="w-full p-2 border rounded focus:ring-[#f97316] focus:border-[#f97316]" required>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block mb-2">Description</label>
                        <textarea id="description" class="w-full p-2 border rounded focus:ring-[#f97316] focus:border-[#f97316]" rows="3" required></textarea>
                    </div>
                    <div class="mb-4">
                        <label class="block mb-2">Features (comma separated)</label>
                        <input type="text" id="features" class="w-full p-2 border rounded focus:ring-[#f97316] focus:border-[#f97316]" placeholder="e.g., Silent operation, Fuel efficient">
                    </div>
                    <div class="flex justify-end space-x-4">
                        <button type="button" id="cancel-edit" class="px-4 py-2 rounded border border-gray-300 hover:bg-gray-100 transition">Cancel</button>
                        <button type="submit" class="btn-primary">Save Generator</button>
                    </div>
                </form>
            </div>
            
            <!-- Generators List -->
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <h3 class="text-xl font-semibold mb-4">Manage Generators</h3>
                <div id="admin-generators-list" class="space-y-4">
                    <!-- Generators will appear here -->
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12 mt-8">
        <div class="container mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">NEW ARUN AUTO</h3>
                    <p class="text-gray-400">58 Years of Excellence in Diesel Generators</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Home</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Generators</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">About Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Contact Us</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li class="flex items-center"><i class="fas fa-map-marker-alt mr-2"></i> 123, Industrial Area, Mumbai</li>
                        <li class="flex items-center"><i class="fas fa-phone mr-2"></i> +91 9022639081</li>
                        <li class="flex items-center"><i class="fas fa-envelope mr-2"></i> info@newarunauto.com</li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Follow Us</h4>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white transition"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2023 NEW ARUN AUTO. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white p-8 rounded-lg max-w-md w-full">
            <div class="text-center mb-6">
                <div class="w-16 h-16 bg-[#f97316]/10 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-lock text-[#f97316] text-2xl"></i>
                </div>
                <h2 class="text-2xl font-bold">Admin Login</h2>
                <p class="text-sm text-gray-500 mt-2">Enter your credentials to access the admin panel</p>
            </div>
            <form id="admin-login-form">
                <div class="mb-4">
                    <label class="block mb-2 font-medium">Username</label>
                    <input type="text" id="admin-username" class="w-full p-3 border rounded-lg focus:ring-[#f97316] focus:border-[#f97316] transition" placeholder="Enter username" required>
                </div>
                <div class="mb-6">
                    <label class="block mb-2 font-medium">Password</label>
                    <input type="password" id="admin-password" class="w-full p-3 border rounded-lg focus:ring-[#f97316] focus:border-[#f97316] transition" placeholder="Enter password" required>
                </div>
                <button type="submit" class="w-full btn-primary py-3 rounded-lg text-lg font-semibold">
                    Login
                </button>
            </form>
            <div id="login-error" class="text-red-500 mt-4 text-center hidden"></div>
        </div>
    </div>

    <script>
        // Admin credentials
        const ADMIN_CREDENTIALS = {
            username: "NAA",
            password: "NAA123"
        };

        // Load generator data from localStorage or use default data
        let generators = JSON.parse(localStorage.getItem('generators')) || [
            {
                id: 1,
                brand: "Mahindra",
                model: "Powerol 1000",
                kva: 10,
                image: "https://images.unsplash.com/photo-1605152276897-4f618f831968?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                description: "Reliable and fuel-efficient generator for small businesses",
                features: ["Silent operation", "Low fuel consumption", "Compact design"]
            },
            {
                id: 2,
                brand: "Kirloskar",
                model: "Green DG25",
                kva: 25,
                image: "https://images.unsplash.com/photo-1605152276897-4f618f831968?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
                description: "Industrial-grade generator with excellent performance",
                features: ["High power output", "Robust construction", "Easy maintenance"]
            }
        ];

        // Load slider images from localStorage or use default data
        let sliderImages = JSON.parse(localStorage.getItem('sliderImages')) || [
            "https://images.unsplash.com/photo-1605152276897-4f618f831968?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
            "https://images.unsplash.com/photo-1600585152220-90363fe7e115?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80",
            "https://images.unsplash.com/photo-1600566752225-72f5a6f36293?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
        ];

        // Save generators to localStorage
        function saveGenerators() {
            localStorage.setItem('generators', JSON.stringify(generators));
        }

        // Save slider images to localStorage
        function saveSliderImages() {
            localStorage.setItem('sliderImages', JSON.stringify(sliderImages));
        }

        // DOM Elements
        const elements = {
            adminModal: document.getElementById('admin-login-modal'),
            loginForm: document.getElementById('admin-login-form'),
            loginError: document.getElementById('login-error'),
            contentSections: document.querySelectorAll('.content-section'),
            generatorsGrid: document.getElementById('generators-grid'),
            adminGeneratorsList: document.getElementById('admin-generators-list'),
            generatorForm: document.getElementById('generator-form'),
            logoutBtn: document.getElementById('logout-admin'),
            cancelEditBtn: document.getElementById('cancel-edit'),
            formTitle: document.getElementById('form-title'),
            navHome: document.querySelector('.nav-home'),
            navGenerators: document.querySelector('.nav-generators'),
            navAdmin: document.querySelector('.nav-admin'),
            navHomeSide: document.querySelector('.nav-home-side'),
            navGeneratorsSide: document.querySelector('.nav-generators-side'),
            navAdminSide: document.querySelector('.nav-admin-side'),
            searchInput: document.getElementById('search-input'),
            searchButton: document.getElementById('search-button'),
            hiddenLoginBtn: document.getElementById('hidden-login-btn'),
            heroSlider: document.getElementById('hero-slider'),
            sliderDots: document.getElementById('slider-dots'),
            newSlideUrl: document.getElementById('new-slide-url'),
            addSlideBtn: document.getElementById('add-slide-btn'),
            slidesList: document.getElementById('slides-list'),
            mobileMenuBtn: document.getElementById('mobile-menu-btn'),
            sideMenu: document.getElementById('side-menu'),
            sideMenuOverlay: document.getElementById('side-menu-overlay'),
            formFields: {
                id: document.getElementById('edit-id'),
                brand: document.getElementById('brand'),
                model: document.getElementById('model'),
                kva: document.getElementById('kva'),
                image: document.getElementById('image'),
                description: document.getElementById('description'),
                features: document.getElementById('features')
            }
        };

        // Side menu functionality
        elements.mobileMenuBtn.addEventListener('click', () => {
            elements.sideMenu.classList.add('active');
            elements.sideMenuOverlay.classList.add('active');
        });

        elements.sideMenuOverlay.addEventListener('click', () => {
            elements.sideMenu.classList.remove('active');
            elements.sideMenuOverlay.classList.remove('active');
        });

        // Slider functionality
        let currentSlide = 0;
        let slideInterval;

        function initSlider() {
            elements.heroSlider.innerHTML = '';
            elements.sliderDots.innerHTML = '';
            
            sliderImages.forEach((image, index) => {
                // Create slide
                const slide = document.createElement('div');
                slide.className = 'hero-slide';
                slide.style.backgroundImage = `url(${image})`;
                if (index === 0) slide.classList.add('active');
                elements.heroSlider.appendChild(slide);
                
                // Create dot
                const dot = document.createElement('div');
                dot.className = `slider-dot ${index === 0 ? 'active' : ''}`;
                dot.dataset.index = index;
                dot.addEventListener('click', () => goToSlide(index));
                elements.sliderDots.appendChild(dot);
            });
            
            // Start auto-sliding
            startSlider();
        }

        function startSlider() {
            clearInterval(slideInterval);
            slideInterval = setInterval(nextSlide, 5000);
        }

        function nextSlide() {
            goToSlide((currentSlide + 1) % sliderImages.length);
        }

        function goToSlide(index) {
            const slides = document.querySelectorAll('.hero-slide');
            const dots = document.querySelectorAll('.slider-dot');
            
            slides[currentSlide].classList.remove('active');
            dots[currentSlide].classList.remove('active');
            
            currentSlide = index;
            
            slides[currentSlide].classList.add('active');
            dots[currentSlide].classList.add('active');
            
            // Reset timer when manually changing slides
            startSlider();
        }

        // Render slides for admin
        function renderAdminSlides() {
            elements.slidesList.innerHTML = sliderImages.map((image, index) => `
                <div class="flex items-center justify-between bg-gray-50 p-4 rounded-lg">
                    <div class="flex items-center">
                        <div class="w-16 h-16 bg-gray-200 rounded-md overflow-hidden mr-4">
                            <img src="${image}" alt="Slide ${index + 1}" class="w-full h-full object-cover">
                        </div>
                        <span class="text-gray-700 truncate max-w-xs">${image}</span>
                    </div>
                    <div class="flex space-x-2">
                        <button class="move-up-btn px-3 py-1 bg-blue-500 text-white rounded" data-index="${index}" ${index === 0 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button class="move-down-btn px-3 py-1 bg-blue-500 text-white rounded" data-index="${index}" ${index === sliderImages.length - 1 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button class="delete-slide-btn px-3 py-1 bg-red-600 text-white rounded" data-index="${index}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Add event listeners to slide management buttons
            document.querySelectorAll('.move-up-btn').forEach(btn => {
                btn.addEventListener('click', () => moveSlide(btn.dataset.index, 'up'));
            });
            
            document.querySelectorAll('.move-down-btn').forEach(btn => {
                btn.addEventListener('click', () => moveSlide(btn.dataset.index, 'down'));
            });
            
            document.querySelectorAll('.delete-slide-btn').forEach(btn => {
                btn.addEventListener('click', () => deleteSlide(btn.dataset.index));
            });
        }

        function moveSlide(index, direction) {
            index = parseInt(index);
            const newIndex = direction === 'up' ? index - 1 : index + 1;
            
            if (newIndex >= 0 && newIndex < sliderImages.length) {
                // Swap the slides
                [sliderImages[index], sliderImages[newIndex]] = [sliderImages[newIndex], sliderImages[index]];
                saveSliderImages();
                renderAdminSlides();
                initSlider();
            }
        }

        function deleteSlide(index) {
            if (confirm("Are you sure you want to delete this slide?")) {
                sliderImages.splice(index, 1);
                saveSliderImages();
                renderAdminSlides();
                initSlider();
            }
        }

        // Add new slide
        elements.addSlideBtn.addEventListener('click', function() {
            const url = elements.newSlideUrl.value.trim();
            if (url) {
                sliderImages.push(url);
                saveSliderImages();
                renderAdminSlides();
                initSlider();
                elements.newSlideUrl.value = '';
            } else {
                alert("Please enter a valid image URL");
            }
        });

        // Show page function
        function showPage(pageId) {
            elements.contentSections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            // Close mobile menu when navigating
            elements.sideMenu.classList.remove('active');
            elements.sideMenuOverlay.classList.remove('active');
        }

        // Render generators for customers
        function renderGenerators(searchTerm = '') {
            // Show loading indicator
            elements.generatorsGrid.innerHTML = `
                <div class="col-span-full text-center py-8">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-[#f97316]"></div>
                    <p class="mt-2 text-gray-600">Loading generators...</p>
                </div>
            `;
            
            // Use setTimeout to allow the UI to update with loading state
            setTimeout(() => {
                // Filter generators based on search term
                const filteredGenerators = searchTerm ? 
                    generators.filter(gen => {
                        const searchLower = searchTerm.toLowerCase();
                        return (
                            gen.brand.toLowerCase().includes(searchLower) || 
                            gen.model.toLowerCase().includes(searchLower) ||
                            gen.kva.toString().includes(searchTerm) ||
                            gen.description.toLowerCase().includes(searchLower) ||
                            gen.features.some(f => f.toLowerCase().includes(searchLower))
                        )
                    }) : generators;
                
                // Update search results info
                const resultsInfo = document.getElementById('search-results-info');
                const resultsCount = document.getElementById('results-count');
                
                if (searchTerm) {
                    resultsInfo.classList.remove('hidden');
                    resultsCount.textContent = filteredGenerators.length;
                    
                    // Show/hide clear search button
                    document.getElementById('clear-search').classList.remove('hidden');
                } else {
                    resultsInfo.classList.add('hidden');
                    document.getElementById('clear-search').classList.add('hidden');
                }
                
                if (filteredGenerators.length === 0) {
                    elements.generatorsGrid.innerHTML = `
                        <div class="col-span-full text-center py-8">
                            <p class="text-gray-600 text-lg">No generators found matching "${searchTerm}"</p>
                            <button class="mt-4 text-[#f97316] hover:underline" id="clear-search-results">
                                Clear search
                            </button>
                        </div>
                    `;
                    
                    document.getElementById('clear-search-results').addEventListener('click', () => {
                        elements.searchInput.value = '';
                        renderGenerators();
                    });
                    return;
                }
                
                elements.generatorsGrid.innerHTML = filteredGenerators.map(gen => `
                    <div class="generator-card">
                        <div class="generator-image-container">
                            <img src="${gen.image}" alt="${gen.brand} ${gen.model}" class="generator-image">
                        </div>
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-gray-900 mb-2">${gen.kva}kVA ${gen.brand}</h3>
                            <p class="text-gray-700 mb-4">${gen.model}</p>
                            <p class="text-gray-600 mb-4">${gen.description.substring(0, 100)}...</p>
                            <div class="flex flex-col space-y-3">
                                <button class="highlight-button more-info-btn text-[#f97316] hover:text-white" data-generator-id="${gen.id}">
                                    <i class="fab fa-whatsapp mr-2"></i> More Information
                                </button>
                                <button class="highlight-button buy-now-btn text-[#f97316] hover:text-white" data-generator-id="${gen.id}">
                                    <i class="fab fa-whatsapp mr-2"></i> Contact for Purchase
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                // Highlight search term in results
                if (searchTerm) {
                    highlightSearchTerm(searchTerm);
                }
                
                // Add event listeners to WhatsApp buttons
                document.querySelectorAll('.more-info-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const generator = generators.find(g => g.id == btn.dataset.generatorId);
                        if (generator) {
                            const phone = "+919022639081";
                            const message = `Hello, I'm interested in the ${generator.kva}kVA ${generator.brand} ${generator.model} generator. Could you please provide more details?`;
                            window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`);
                        }
                    });
                });
                
                document.querySelectorAll('.buy-now-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const generator = generators.find(g => g.id == btn.dataset.generatorId);
                        if (generator) {
                            const phone = "+919022639081";
                            const message = `Hello, I would like to purchase the ${generator.kva}kVA ${generator.brand} ${generator.model} generator. Please let me know the next steps.`;
                            window.open(`https://wa.me/${phone}?text=${encodeURIComponent(message)}`);
                        }
                    });
                });
            }, 300); // Small delay for better UX
        }

        function highlightSearchTerm(term) {
            const elements = document.querySelectorAll('#generators-grid h3, #generators-grid p');
            const regex = new RegExp(term, 'gi');
            
            elements.forEach(element => {
                const html = element.innerHTML;
                const highlighted = html.replace(regex, match => 
                    `<span class="bg-yellow-200">${match}</span>`
                );
                element.innerHTML = highlighted;
            });
        }

        // Render generators for admin
        function renderAdminGenerators() {
            elements.adminGeneratorsList.innerHTML = generators.map(gen => `
                <div class="flex justify-between items-center bg-gray-50 p-4 rounded-lg mb-2">
                    <div>
                        <h4 class="font-bold">${gen.kva}kVA ${gen.brand} ${gen.model}</h4>
                        <p class="text-gray-600">${gen.description.substring(0, 60)}...</p>
                    </div>
                    <div class="flex space-x-2">
                        <button class="edit-btn px-3 py-1 bg-[#f97316] text-white rounded" data-id="${gen.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="delete-btn px-3 py-1 bg-red-600 text-white rounded" data-id="${gen.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `).join('');

            // Add event listeners to edit/delete buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', () => editGenerator(btn.dataset.id));
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', () => deleteGenerator(btn.dataset.id));
            });
        }

        // Edit generator
        function editGenerator(id) {
            const generator = generators.find(g => g.id == id);
            if (generator) {
                elements.formTitle.textContent = "Edit Generator";
                elements.formFields.id.value = generator.id;
                elements.formFields.brand.value = generator.brand;
                elements.formFields.model.value = generator.model;
                elements.formFields.kva.value = generator.kva;
                elements.formFields.image.value = generator.image;
                elements.formFields.description.value = generator.description;
                elements.formFields.features.value = generator.features.join(', ');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Delete generator
        function deleteGenerator(id) {
            if (confirm("Are you sure you want to delete this generator?")) {
                generators = generators.filter(g => g.id != id);
                saveGenerators();
                renderAdminGenerators();
                renderGenerators();
            }
        }

        // Cancel edit
        elements.cancelEditBtn.addEventListener('click', () => {
            elements.generatorForm.reset();
            elements.formTitle.textContent = "Add New Generator";
        });

        // Handle form submission
        elements.generatorForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const generatorData = {
                id: elements.formFields.id.value ? parseInt(elements.formFields.id.value) : Date.now(),
                brand: elements.formFields.brand.value,
                model: elements.formFields.model.value,
                kva: parseInt(elements.formFields.kva.value),
                image: elements.formFields.image.value,
                description: elements.formFields.description.value,
                features: elements.formFields.features.value.split(',').map(f => f.trim())
            };

            if (elements.formFields.id.value) {
                // Update existing generator
                const index = generators.findIndex(g => g.id == generatorData.id);
                if (index !== -1) {
                    generators[index] = generatorData;
                }
            } else {
                // Add new generator
                generators.push(generatorData);
            }

            elements.generatorForm.reset();
            elements.formTitle.textContent = "Add New Generator";
            saveGenerators();
            renderAdminGenerators();
            renderGenerators();
            
            // Show success message
            alert("Generator saved successfully!");
        });

        // Admin login state management
        let isAdmin = localStorage.getItem('isAdmin') === 'true' || false;
        
        function updateNavVisibility() {
            if (isAdmin) {
                elements.navAdmin.classList.remove('hidden');
                elements.navAdminSide.classList.remove('hidden');
            } else {
                elements.navAdmin.classList.add('hidden');
                elements.navAdminSide.classList.add('hidden');
            }
        }

        // Initialize admin state
        updateNavVisibility();
        
        elements.loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('admin-username').value.trim();
            const password = document.getElementById('admin-password').value.trim();

            if (username === ADMIN_CREDENTIALS.username && password === ADMIN_CREDENTIALS.password) {
                isAdmin = true;
                localStorage.setItem('isAdmin', 'true');
                updateNavVisibility();
                elements.adminModal.classList.add('hidden');
                showPage('admin-section');
                renderAdminGenerators();
                renderAdminSlides();
                elements.loginError.classList.add('hidden');
                
                // Clear password field
                document.getElementById('admin-password').value = '';
            } else {
                elements.loginError.textContent = 'Invalid username or password';
                elements.loginError.classList.remove('hidden');
                
                // Shake animation for error
                elements.loginForm.classList.add('animate-shake');
                setTimeout(() => {
                    elements.loginForm.classList.remove('animate-shake');
                }, 500);
            }
        });

        // Logout
        elements.logoutBtn.addEventListener('click', () => {
            isAdmin = false;
            localStorage.removeItem('isAdmin');
            updateNavVisibility();
            showPage('home-section');
            elements.generatorForm.reset();
            elements.formTitle.textContent = "Add New Generator";
            
            // Clear any existing search
            elements.searchInput.value = '';
            renderGenerators();
        });

        // Navigation
        elements.navHome.addEventListener('click', () => {
            showPage('home-section');
            // Clear any existing search
            elements.searchInput.value = '';
            renderGenerators();
        });
        
        elements.navGenerators.addEventListener('click', () => {
            showPage('generators-section');
            renderGenerators();
        });
        
        elements.navAdmin.addEventListener('click', () => {
            if (isAdmin) {
                showPage('admin-section');
                renderAdminGenerators();
                renderAdminSlides();
            }
        });
        
        // Side menu navigation
        elements.navHomeSide.addEventListener('click', () => {
            showPage('home-section');
            // Clear any existing search
            elements.searchInput.value = '';
            renderGenerators();
        });
        
        elements.navGeneratorsSide.addEventListener('click', () => {
            showPage('generators-section');
            renderGenerators();
        });
        
        elements.navAdminSide.addEventListener('click', () => {
            if (isAdmin) {
                showPage('admin-section');
                renderAdminGenerators();
                renderAdminSlides();
            }
        });
        
        document.querySelector('.explore-generators-btn').addEventListener('click', () => {
            showPage('generators-section');
            renderGenerators();
        });

        // Search functionality
        elements.searchButton.addEventListener('click', () => {
            renderGenerators(elements.searchInput.value);
        });
        
        elements.searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                renderGenerators(elements.searchInput.value);
            }
        });

        // Clear search functionality
        document.getElementById('clear-search').addEventListener('click', () => {
            elements.searchInput.value = '';
            renderGenerators();
        });

        // Hidden login button
        elements.hiddenLoginBtn.addEventListener('click', () => {
            if (!isAdmin) {
                elements.adminModal.classList.remove('hidden');
                document.getElementById('admin-username').focus();
            }
        });

        // Close modal when clicking outside
        elements.adminModal.addEventListener('click', (e) => {
            if (e.target === elements.adminModal) {
                elements.adminModal.classList.add('hidden');
                elements.loginError.classList.add('hidden');
            }
        });

        // Initialize
        initSlider();
        showPage('home-section');
        renderGenerators();
    </script>
</body>
</html>